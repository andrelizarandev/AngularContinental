<app-navigation-container>

  <app-custom-breadcrumb [items]="breadcrumbItems"/>

  <app-card-with-skeleton [isLoading]="getUsersQuery.isLoading()">

    <div class="h-flex-justify-between-align-center">

      <h3 class="c-title fw-400">Usuarios</h3>
  
      <p-button label="Registrar Usuario" icon="pi pi-plus" size="small" (onClick)="redirectToRegisterUser(0)"></p-button>
  
    </div>

    <p-table [value]="getUsersQuery.data() || []">

      <ng-template pTemplate="header">
  
        <tr>
          
          <th>Nombre</th>
          
          <th>Apellido</th>
          
          <th>Correo</th>
          
          <th>Rol</th>
          
          <th>Acciones</th>

        </tr>
  
      </ng-template>
  
      <ng-template pTemplate="body" let-user>
  
        <tr>

          <td>{{ user.nombres }}</td>

          <td>{{ user.apellidos }}</td>

          <td>{{ user.email }}</td>

          <td>{{ user.nombre_rol }}</td>

          <td>

            <div class="h-flex">

              <p-button 
                label="Editar" 
                icon="pi pi-pencil" 
                size="small"
                (onClick)="redirectToRegisterUser(user.id_usuario)"
              />

              <p-button 
                label="Eliminar" 
                icon="pi pi-trash" 
                size="small" 
                (onClick)="confirmDeleteUser(user)"
              />

            </div>
          
        </tr>
        
      </ng-template>
    </p-table>

  </app-card-with-skeleton>
  
</app-navigation-container>